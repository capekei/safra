# ============================================================================
#                         SAFRAREPORT CONFIGURATION
# ============================================================================
# Generated: 2025-01-01 | Version: 2.0.0
# 
# Instructions:
# 1. Copy this file to .env
# 2. Run: npm run env:generate-secrets
# 3. Fill in service credentials
# 4. Run: npm run env:validate
# ============================================================================

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                           DEPLOYMENT SETTINGS                             │
# └──────────────────────────────────────────────────────────────────────────┘
NODE_ENV=development                    # development | production | test
PORT=10000                             # Render uses 10000
APP_NAME="SafraReport"
APP_VERSION="2.0.0"
APP_URL="http://localhost:10000"      # Change to https://safra.onrender.com for prod

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                            DATABASE (Required)                            │
# └──────────────────────────────────────────────────────────────────────────┘
# PostgreSQL Connection (Neon/Render)
DATABASE_URL="postgresql://user:pass@host:port/db?sslmode=require"

# Connection Pool Settings
DB_POOL_MIN=2                         # Minimum pool size
DB_POOL_MAX=10                        # Maximum pool size (20 for prod)
DB_IDLE_TIMEOUT=30000                 # Close idle connections after 30s
DB_CONNECTION_TIMEOUT=5000            # Connection timeout in ms
DB_STATEMENT_TIMEOUT=30000           # Query timeout in ms
DB_SSL_REQUIRED=true                 # Force SSL in production

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                         AUTHENTICATION (Required)                         │
# └──────────────────────────────────────────────────────────────────────────┘
# JWT Configuration [Generate: npm run env:generate-secrets]
JWT_SECRET="GENERATE_BASE64_SECRET_MIN_64_CHARS"
JWT_EXPIRES_IN="7d"                  # Token expiration
JWT_REFRESH_SECRET="GENERATE_BASE64_SECRET_MIN_64_CHARS"
JWT_REFRESH_EXPIRES_IN="30d"         # Refresh token expiration

# Session Configuration
SESSION_SECRET="GENERATE_BASE64_SECRET_MIN_64_CHARS"
SESSION_NAME="safra_session"
SESSION_MAX_AGE=86400000             # 24 hours in ms
SESSION_SECURE=false                 # true for production
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE="lax"              # strict | lax | none

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                            AUTH0 (Optional)                               │
# └──────────────────────────────────────────────────────────────────────────┘
# Server-side Auth0
AUTH0_ENABLED=false                   # Enable/disable Auth0
AUTH0_DOMAIN=""                       # your-tenant.auth0.com
AUTH0_CLIENT_ID=""
AUTH0_CLIENT_SECRET=""
AUTH0_AUDIENCE=""
AUTH0_ISSUER_BASE_URL=""
AUTH0_SECRET=""
AUTH0_SCOPE="openid profile email"

# Client-side Auth0 (Vite)
VITE_AUTH0_ENABLED=false
VITE_AUTH0_DOMAIN=""
VITE_AUTH0_CLIENT_ID=""
VITE_AUTH0_AUDIENCE=""
VITE_AUTH0_REDIRECT_URI=""

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                      SECURITY & RATE LIMITING                             │
# └──────────────────────────────────────────────────────────────────────────┘
# CORS Configuration
CORS_ENABLED=true
CORS_ORIGINS="http://localhost:5173,http://localhost:3000"
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# Security Headers
HELMET_ENABLED=true
TRUST_PROXY=false                    # true for Render/production
SECURE_COOKIES=false                 # true for production
COOKIE_DOMAIN=""                     # .safrareport.com for production

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000         # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100         # Max requests per window
RATE_LIMIT_SKIP_SUCCESSFUL=false
RATE_LIMIT_SKIP_FAILED=false

# Auth-specific Rate Limiting
AUTH_MAX_ATTEMPTS=5                  # Max login attempts
AUTH_LOCKOUT_DURATION=900000        # 15 minutes lockout
AUTH_RATE_LIMIT_WINDOW=900000
AUTH_RATE_LIMIT_MAX=5

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                          CLIENT CONFIGURATION                             │
# └──────────────────────────────────────────────────────────────────────────┘
# Vite/React Configuration
VITE_API_URL=""                      # Leave empty for proxy in dev
VITE_APP_NAME="SafraReport"
VITE_APP_VERSION="2.0.0"
VITE_DEFAULT_LOCALE="es-DO"
VITE_DEFAULT_CURRENCY="DOP"
VITE_DEFAULT_TIMEZONE="America/Santo_Domingo"

# Feature Flags
VITE_ENABLE_ANALYTICS=false
VITE_ENABLE_DEBUG=false
VITE_ENABLE_PWA=false
VITE_ENABLE_OFFLINE=false

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                      DOMINICAN REPUBLIC SPECIFIC                          │
# └──────────────────────────────────────────────────────────────────────────┘
# Localization
DEFAULT_COUNTRY="DO"
DEFAULT_PROVINCE="Santo Domingo"
DEFAULT_PHONE_PREFIX="+1809"
DEFAULT_DATE_FORMAT="DD/MM/YYYY"
CURRENCY_SYMBOL="RD$"

# Local Services Integration
FUEL_PRICE_API_URL=""
FUEL_PRICE_API_KEY=""
EXCHANGE_RATE_API_URL=""
EXCHANGE_RATE_API_KEY=""
WEATHER_API_KEY=""

# Mobile Optimization
MOBILE_FIRST=true
IMAGE_COMPRESSION_QUALITY=80        # Lower for mobile
LAZY_LOAD_IMAGES=true
CACHE_TTL=3600

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                        EXTERNAL SERVICES (Optional)                       │
# └──────────────────────────────────────────────────────────────────────────┘
# Email Service (SMTP)
SMTP_ENABLED=false
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_SECURE=false                   # true for 465, false for 587
SMTP_USER=""
SMTP_PASS=""
SMTP_FROM="noreply@safrareport.com"
SMTP_REPLY_TO="support@safrareport.com"

# File Storage
STORAGE_PROVIDER="local"            # local | cloudinary | s3
UPLOAD_DIR="./uploads"
MAX_FILE_SIZE=10485760              # 10MB in bytes
ALLOWED_FILE_TYPES="image/jpeg,image/png,image/webp,application/pdf"

# Cloudinary (if STORAGE_PROVIDER=cloudinary)
CLOUDINARY_CLOUD_NAME=""
CLOUDINARY_API_KEY=""
CLOUDINARY_API_SECRET=""
CLOUDINARY_FOLDER="safra"

# AWS S3 (if STORAGE_PROVIDER=s3)
AWS_ACCESS_KEY_ID=""
AWS_SECRET_ACCESS_KEY=""
AWS_REGION="us-east-1"
AWS_BUCKET_NAME=""

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                         MONITORING & LOGGING                              │
# └──────────────────────────────────────────────────────────────────────────┘
# Logging
LOG_LEVEL="info"                    # error | warn | info | debug
LOG_FORMAT="json"                   # json | pretty
LOG_TO_FILE=false
LOG_FILE_PATH="./logs/app.log"
LOG_MAX_FILES=7
LOG_REQUESTS=true
LOG_ERRORS=true

# Error Tracking
SENTRY_ENABLED=false
SENTRY_DSN=""
SENTRY_ENVIRONMENT=""
SENTRY_SAMPLE_RATE=1.0

# Analytics
ANALYTICS_ENABLED=false
GA_MEASUREMENT_ID=""
HOTJAR_ID=""
CLARITY_ID=""

# Performance Monitoring
NEW_RELIC_ENABLED=false
NEW_RELIC_APP_NAME=""
NEW_RELIC_LICENSE_KEY=""

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                            CACHE & REDIS                                  │
# └──────────────────────────────────────────────────────────────────────────┘
CACHE_ENABLED=false
CACHE_PROVIDER="memory"             # memory | redis
CACHE_TTL=3600                      # Default TTL in seconds

# Redis Configuration (if CACHE_PROVIDER=redis)
REDIS_ENABLED=false
REDIS_URL=""
REDIS_HOST="localhost"
REDIS_PORT=6379
REDIS_PASSWORD=""
REDIS_DB=0
REDIS_KEY_PREFIX="safra:"

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                          DEVELOPMENT & DEBUG                              │
# └──────────────────────────────────────────────────────────────────────────┘
DEBUG=false
DEBUG_SQL=false
DEBUG_HTTP=false
DEBUG_CACHE=false
VERBOSE_ERRORS=false               # Show stack traces in development
PRETTY_LOGS=true                   # Pretty print logs in development

# ┌──────────────────────────────────────────────────────────────────────────┐
# │                           BACKUP & MAINTENANCE                            │
# └──────────────────────────────────────────────────────────────────────────┘
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="Sistema en mantenimiento. Volvemos pronto."
BACKUP_ENABLED=false
BACKUP_SCHEDULE="0 2 * * *"        # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# ============================================================================
# END OF CONFIGURATION
# ============================================================================